/**
 * MessageQueue
 * @license MIT
 * @copyright 2025 Natz
 */




const _0x122ee0=_0x2c99;(function(_0x11612a,_0x4805e7){const _0x3286f5=_0x2c99,_0x4ff7bc=_0x11612a();while(!![]){try{const _0x370962=-parseInt(_0x3286f5(0x1e2))/0x1*(-parseInt(_0x3286f5(0x284))/0x2)+parseInt(_0x3286f5(0x229))/0x3*(parseInt(_0x3286f5(0x253))/0x4)+parseInt(_0x3286f5(0x193))/0x5*(parseInt(_0x3286f5(0x208))/0x6)+parseInt(_0x3286f5(0x29e))/0x7+parseInt(_0x3286f5(0x1db))/0x8*(parseInt(_0x3286f5(0x299))/0x9)+parseInt(_0x3286f5(0x289))/0xa*(-parseInt(_0x3286f5(0x2a1))/0xb)+-parseInt(_0x3286f5(0x1b4))/0xc;if(_0x370962===_0x4805e7)break;else _0x4ff7bc['push'](_0x4ff7bc['shift']());}catch(_0x55c6f8){_0x4ff7bc['push'](_0x4ff7bc['shift']());}}}(_0x345d,0x53c02));import{makeWASocket,useMultiFileAuthState,DisconnectReason,isJidNewsletter,downloadMediaMessage,jidNormalizedUser,proto,getContentType}from'naruyaizumi';import _0x172950 from'pino';import _0x235bab from'qrcode-terminal';import*as _0x3422b8 from'@hapi/boom';import{MessageRegistry}from'./Clients/RegistryCommands.js';import{createMessageHandler,processMessageFromQueue,delay}from'./Clients/messageClients.js';import{handleIncomingMessage}from'./Clients/messageClients.js';import _0x10f99e from'os';import{setupAntiCall}from'./Clients/Settings/antiCall.js';import _0x43da1e from'./config.js';import _0x4c3457 from'dayjs';import{generateGoodbyeCard,generateWelcomeCard,generateDefaultGroupConfig}from'./Clients/groupHandle.js';import _0x245e34 from'path';function _0x345d(){const _0x2acb4b=['stateChanged','ðŸ“¦\x20Group\x20','not_initialized','getUptime','subject','groupMetadata','./src/media/images.jpg','blue','connected','Failed\x20to\x20initialize\x20group\x20configurations:','messages.update','WhatsApp/2.23.24.76\x20Mozilla/5.0\x20(Macintosh;\x20Intel\x20Mac\x20OS\x20X\x2010_15_7)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/120.0.0.0\x20Safari/537.36','Failed\x20to\x20send\x20welcome\x20message:\x20','startTime','notify','sendFallbackMessage','Error\x20in\x20memory\x20management:','ðŸ’»\x20Platform:','status','lastKnownPresence','sock','Connection\x20closed:\x20','SIGTERM','connecting','Botinfo','...','Boom\x20error\x20details:','reconnectTimer','payload','keys','ðŸ’¥\x20Bot\x20permanently\x20disconnected\x20-\x20Manual\x20intervention\x20may\x20be\x20required','Error\x20handling\x20connection\x20update:','ðŸ›‘\x20Graceful\x20shutdown\x20initiated\x20by\x20','Failed\x20to\x20send\x20goodbye\x20message:\x20','27728soYyVr','ðŸš€\x20Initializing\x20Oblivinx\x20Bot...','log','output','reason:','Failed\x20to\x20send\x20fallback\x20message:','attemptReconnection','CB:call','ðŸ”„\x20Uptime:','\x20status:\x20','errorCount','ðŸ§¹\x20Auth\x20session\x20cleared','error','Error\x20in\x20message\x20handler:','Failed\x20to\x20process\x20participant\x20','Error\x20during\x20shutdown:','disconnected','healthCheckInterval','handleConnectionOpen','get','ðŸ§¹\x20Auth\x20data\x20cleared\x20for\x20fresh\x20start','Stream\x20error:','admin','statusCode','repeat','memoryUsage','ðŸ”„\x20Session\x20restart\x20required\x20-\x20Clearing\x20auth\x20data','assign','OblivinxBot','resetCounters','consecutiveErrors','lastGCTime','handleParticipantUpdate','âœ…\x20Bot\x20connected\x20successfully!','loggedOut','silent','ðŸ“Š\x20Reconnects:','platform','enabled','memoryManagementInterval','setDefaultHandler','Connected\x20&\x20Ready','badSession','restartRequired','displayStartupBanner','debug','sessionsCleared','length','info','20uSPMuh','âŒ\x20Recovery\x20attempts\x20exhausted\x20or\x20too\x20many\x20errors','\x20|\x20Reconnects:\x20','\x20â†’\x20','creds.update','430XvKYtK','Failed\x20to\x20generate\x20pairing\x20code:','isRunning','connectionStatus','includes','\x20cores','LOG_LEVEL','SIGQUIT','isBoom','ðŸ“±\x20QR\x20Code\x20received,\x20please\x20scan\x20with\x20WhatsApp','\x0aðŸš€\x20Bot\x20is\x20running\x20smoothly!\x20Ready\x20to\x20serve\x20users.','Error\x20in\x20group\x20participant\x20update\x20for\x20','updateState','\x20has\x20left\x20*','.moderation.goodbye','*!\x0a\x0aEnjoy\x20your\x20stay\x20with\x20us!\x20ðŸŽ‰','6126057kCIpjL','performance','emit','prefix','CB:stream-error','3982426KSICdM','ðŸ”„\x20Attempting\x20to\x20clear\x20session\x20and\x20restart\x20fresh...','Uncaught\x20Exception:','161832KBCqrC','clear','2.0.0','\x20initialized\x20in\x20database.','handleConnectionUpdate','IQ\x20Error\x20received:','Connection\x20status:\x20','close','split','âŒ\x20Max\x20reconnection\x20attempts\x20(','function','cleanup','ðŸ“Œ\x20Status:','ðŸ”„\x20Attempting\x20recovery...','Queue\x20is\x20required\x20for\x20bot\x20initialization','Natz6N','url','callDB','data','âœ…\x20Goodbye\x20message\x20sent\x20for\x20','has','startHealthMonitoring','format','âœ…\x20Bot\x20initialization\x20completed\x20successfully','end','Failed\x20to\x20clear\x20session:','owners','group-participants.update','Error\x20handling\x20call:','blocked','Unhandled\x20Rejection\x20at:','message','âœ…\x20Socket\x20closed.','group','session','cpus','ðŸ”„\x20Final\x20recovery\x20attempt...','forEach','dirname','ðŸ”„\x20Connecting\x20to\x20WhatsApp...','Socket\x20not\x20available\x20for\x20group\x20initialization','âœ…\x20Welcome\x20message\x20sent\x20for\x20','counterIncremented','remove','getGroupMetadata','135350TsWvcp',')\x20reached\x20or\x20permanent\x20error','open','unknown','arch','â°\x20Rate\x20limited\x20or\x20timed\x20out\x20-\x20Using\x20longer\x20delay','delete','warn','ðŸ§¹\x20Clearing\x20potentially\x20corrupted\x20auth\x20data...','name','{levelLabel}\x20[{time}]\x20{msg}','groupFetchAllParticipating','generate','existsSync','superadmin','HH:MM:ss','default','logged_out','ms\x20before\x20retry...','__oblivinx_auth','pow','env','Presence\x20update\x20for\x20','ðŸ§¹\x20Forcing\x20garbage\x20collection\x20due\x20to\x20high\x20memory\x20usage','Error\x20processing\x20presence\x20update:','âœ…\x20Shutdown\x20complete','shouldAttemptReconnect','ðŸ“ž\x20Incoming\x20call\x20from\x20','timedOut','chalk','sendGoodbyeMessage','image','120.0.6099.109','7365012jOLwjf','\x20in\x20','replace','pid,hostname','from','broadcast','min','onWhatsApp','ðŸ‘‘\x20Author:','botState','Chrome','logger','ðŸ’¥\x20Final\x20recovery\x20attempt\x20failed:','phoneNumber','owner','ðŸ“¦\x20Created\x20default\x20config\x20for\x20group:\x20','formatUptime','resetReconnectionAttempts','\x20to\x20*','ðŸ“¦\x20Initializing\x20group\x20configurations...','find','ðŸ“±\x20Pairing\x20code:\x20','processingQueue','ðŸ•’\x20Started:','phone','gray','Failed\x20to\x20clear\x20auth:','ðŸŽ‰\x20Bot\x20successfully\x20connected\x20and\x20ready!','Error\x20during\x20connection\x20setup:','ðŸ”§\x20Prefix:','incrementCounter','Error\x20in\x20connection\x20update\x20handler:','ðŸ”„\x20Attempting\x20reconnection\x20now...','MB\x20|\x20Errors:\x20','âš ï¸\x20High\x20memory\x20usage:\x20','ðŸ˜¢\x20@','bold','*\x0a\x0aWe\x27ll\x20miss\x20you!\x20ðŸ‘‹','connection.update','8QarNyi','initializeGroupConfigs','cyan','heapUsed','presence.update','setSock','sendMessage','12260pqhSWj','floor','âš ï¸\x20Socket\x20not\x20initialized\x20or\x20already\x20closed.','uncaughtException','attemptReconnectionWithDelay','ðŸ’¾\x20Memory:\x20','Error\x20in\x20group\x20participant\x20update:','sendWelcomeMessage','\x20MB','peakMemoryUsage','ðŸšª\x20Session\x20logged\x20out\x20-\x20Please\x20scan\x20QR\x20again','participants','rmSync','banned','qrScanned','clearSession','\x20(Code:\x20','pino-pretty','SIGINT','lastError','ensureGroupConfig','ðŸ’¥\x20Critical\x20error\x20initializing\x20bot:','yellow','CB:iq-error','version','messageCount','â³\x20Waiting\x20','Error\x20processing\x20message\x20update:','requestPairingCode','round','exit','countersReset','presences','reconnectAttempts','ðŸ§¹\x20Garbage\x20collection\x20triggered','messages.upsert','add','Failed\x20to\x20setup\x20anti-call\x20system:','42vYZcSa','maxReconnectAttempts','ðŸ‘‹\x20Welcome\x20@','processParticipant','now','.moderation.welcome','\x0aâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\x0aâ•‘\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ðŸ¤–\x20OBLIVINX\x20BOT\x20v','Failed\x20to\x20create\x20group\x20config\x20for\x20','getUserInfo','Message\x20','ðŸ’¥\x20Recovery\x20failed:','getProfilePicture','state','ðŸ”„\x20Starting\x20bot\x20recovery\x20process...','auth','resolve','set','âš ï¸\x20High\x20error\x20count\x20detected:\x20','unhandledRejection','âš¡\x20CPU:','âš ï¸\x20Manual\x20intervention\x20required:\x20','handleConnectionClose','Too\x20many\x20consecutive\x20errors,\x20shutting\x20down...','Failed\x20to\x20get\x20metadata\x20for\x20group\x20','totalmem','ðŸ”§\x20Bad\x20session\x20detected\x20-\x20Clearing\x20and\x20retrying','\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20â•‘\x0aâ•‘\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Advanced\x20WhatsApp\x20Bot\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20â•‘\x0aâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•','Unknown\x20error','green','YYYY-MM-DD\x20HH:mm:ss','backoffDelays','ðŸ”„\x20Reconnection\x20attempt\x20','Reconnection\x20failed:','12XiZwPY','requiresManualIntervention','ownerDB','pairingCode','join','\x20consecutive\x20errors','ðŸ§ \x20Memory:','profilePictureUrl'];_0x345d=function(){return _0x2acb4b;};return _0x345d();}import{fileURLToPath}from'url';import _0x927633 from'events';const __filename=fileURLToPath(import.meta[_0x122ee0(0x176)]),__dirname=_0x245e34[_0x122ee0(0x18c)](__filename);class BotStateManager extends _0x927633{constructor(){const _0x562020=_0x122ee0;super(),this[_0x562020(0x214)]={'isRunning':![],'isPaused':![],'startTime':null,'lastReconnect':null,'reconnectAttempts':0x0,'maxReconnectAttempts':0xa,'messageCount':0x0,'errorCount':0x0,'totalUptime':0x0,'connectionStatus':_0x562020(0x263),'qrScanned':![],'sessionsCleared':0x0,'lastError':null,'consecutiveErrors':0x0},this[_0x562020(0x29a)]={'avgResponseTime':0x0,'totalResponses':0x0,'peakMemoryUsage':0x0,'lastGCTime':null};}[_0x122ee0(0x295)](_0x159ac8){const _0x465ca3=_0x122ee0,_0x5ee496={...this[_0x465ca3(0x214)]};Object[_0x465ca3(0x26e)](this[_0x465ca3(0x214)],_0x159ac8),this[_0x465ca3(0x29b)](_0x465ca3(0x231),{'oldState':_0x5ee496,'newState':this[_0x465ca3(0x214)]});}[_0x122ee0(0x1d2)](_0x1f7c57){const _0x4b12d6=_0x122ee0;this[_0x4b12d6(0x214)][_0x1f7c57]!==undefined&&(this[_0x4b12d6(0x214)][_0x1f7c57]++,this[_0x4b12d6(0x29b)](_0x4b12d6(0x190),{'key':_0x1f7c57,'value':this[_0x4b12d6(0x214)][_0x1f7c57]}));}[_0x122ee0(0x270)](){const _0x2e1dd4=_0x122ee0;this[_0x2e1dd4(0x214)][_0x2e1dd4(0x1fb)]=0x0,this[_0x2e1dd4(0x214)][_0x2e1dd4(0x25d)]=0x0,this[_0x2e1dd4(0x214)][_0x2e1dd4(0x203)]=0x0,this[_0x2e1dd4(0x214)][_0x2e1dd4(0x271)]=0x0,this[_0x2e1dd4(0x29b)](_0x2e1dd4(0x201));}[_0x122ee0(0x1c5)](){const _0x1825da=_0x122ee0;this[_0x1825da(0x214)][_0x1825da(0x203)]=0x0,this[_0x1825da(0x214)][_0x1825da(0x271)]=0x0,this[_0x1825da(0x214)][_0x1825da(0x1f5)]=null;}[_0x122ee0(0x234)](){const _0x58228c=_0x122ee0;if(!this[_0x58228c(0x214)][_0x58228c(0x23e)])return 0x0;return Date[_0x58228c(0x20c)]()-this[_0x58228c(0x214)][_0x58228c(0x23e)];}[_0x122ee0(0x1c4)](){const _0x541d74=_0x122ee0,_0x50fbcc=this[_0x541d74(0x234)](),_0x1009b5=Math[_0x541d74(0x1e3)](_0x50fbcc/(0x18*0x3c*0x3c*0x3e8)),_0x35afee=Math[_0x541d74(0x1e3)](_0x50fbcc%(0x18*0x3c*0x3c*0x3e8)/(0x3c*0x3c*0x3e8)),_0x27eab9=Math[_0x541d74(0x1e3)](_0x50fbcc%(0x3c*0x3c*0x3e8)/(0x3c*0x3e8)),_0x303b42=Math[_0x541d74(0x1e3)](_0x50fbcc%(0x3c*0x3e8)/0x3e8);if(_0x1009b5>0x0)return _0x1009b5+'d\x20'+_0x35afee+'h\x20'+_0x27eab9+'m\x20'+_0x303b42+'s';if(_0x35afee>0x0)return _0x35afee+'h\x20'+_0x27eab9+'m\x20'+_0x303b42+'s';if(_0x27eab9>0x0)return _0x27eab9+'m\x20'+_0x303b42+'s';return _0x303b42+'s';}}class ConnectionManager{constructor(_0x47ced2,_0x444d2d){const _0xc9f9c4=_0x122ee0;this[_0xc9f9c4(0x1bd)]=_0x47ced2,this[_0xc9f9c4(0x1bf)]=_0x444d2d,this[_0xc9f9c4(0x24c)]=null,this[_0xc9f9c4(0x264)]=null,this[_0xc9f9c4(0x226)]=[0x3e8,0x7d0,0x1388,0x2710,0x7530,0xea60],this[_0xc9f9c4(0x245)]=null;}async[_0x122ee0(0x16a)](_0x30826d,_0x56b68e,_0x5cbbf7){const _0x5caad1=_0x122ee0,{connection:_0x3004e5,lastDisconnect:_0x4f2621,qr:_0xacfaa3}=_0x30826d;try{if(_0xacfaa3&&!this[_0x5caad1(0x1bd)][_0x5caad1(0x214)][_0x5caad1(0x1f0)]){this[_0x5caad1(0x1bf)][_0x5caad1(0x283)](_0x5caad1(0x292)),_0x235bab[_0x5caad1(0x19f)](_0xacfaa3,{'small':!![]});if(_0x43da1e[_0x5caad1(0x22c)]?.[_0x5caad1(0x279)]&&_0x43da1e[_0x5caad1(0x22c)]?.[_0x5caad1(0x1c1)]&&this[_0x5caad1(0x245)])try{const _0x5931af=await this[_0x5caad1(0x245)][_0x5caad1(0x1fe)](_0x43da1e[_0x5caad1(0x22c)][_0x5caad1(0x1c1)]);this[_0x5caad1(0x1bf)][_0x5caad1(0x283)](_0x5caad1(0x1c9)+_0x5931af);}catch(_0x4ac8ef){this[_0x5caad1(0x1bf)][_0x5caad1(0x19a)](_0x5caad1(0x28a),_0x4ac8ef[_0x5caad1(0x185)]);}}switch(_0x3004e5){case _0x5caad1(0x248):this[_0x5caad1(0x1bd)][_0x5caad1(0x295)]({'connectionStatus':_0x5caad1(0x248)}),this[_0x5caad1(0x1bf)][_0x5caad1(0x283)](_0x5caad1(0x18d));break;case _0x5caad1(0x195):await this[_0x5caad1(0x265)](_0x5cbbf7);break;case _0x5caad1(0x16d):await this[_0x5caad1(0x21d)](_0x4f2621,_0x56b68e,_0x5cbbf7);break;default:this[_0x5caad1(0x1bf)][_0x5caad1(0x280)](_0x5caad1(0x16c)+_0x3004e5);}}catch(_0x398a9c){this[_0x5caad1(0x1bf)][_0x5caad1(0x25f)](_0x5caad1(0x250),_0x398a9c),this[_0x5caad1(0x1bd)][_0x5caad1(0x1d2)](_0x5caad1(0x25d)),this[_0x5caad1(0x1bd)][_0x5caad1(0x214)][_0x5caad1(0x271)]++,this[_0x5caad1(0x1bd)][_0x5caad1(0x214)][_0x5caad1(0x1f5)]=_0x398a9c[_0x5caad1(0x185)];}}async[_0x122ee0(0x265)](_0x2cc2a5){const _0x2ee16f=_0x122ee0;this[_0x2ee16f(0x1bd)][_0x2ee16f(0x295)]({'isRunning':!![],'isPaused':![],'connectionStatus':_0x2ee16f(0x239),'qrScanned':!![],'startTime':this[_0x2ee16f(0x1bd)][_0x2ee16f(0x214)][_0x2ee16f(0x23e)]||Date[_0x2ee16f(0x20c)]()}),this[_0x2ee16f(0x1bd)][_0x2ee16f(0x1c5)](),this[_0x2ee16f(0x1bf)][_0x2ee16f(0x283)](_0x2ee16f(0x274));try{await this[_0x2ee16f(0x1dc)](),this[_0x2ee16f(0x17b)](),this[_0x2ee16f(0x27f)](),this[_0x2ee16f(0x1bd)][_0x2ee16f(0x29b)](_0x2ee16f(0x239));}catch(_0x91c0de){this[_0x2ee16f(0x1bf)][_0x2ee16f(0x25f)](_0x2ee16f(0x1d0),_0x91c0de),this[_0x2ee16f(0x1bd)][_0x2ee16f(0x214)][_0x2ee16f(0x271)]++;}}async[_0x122ee0(0x21d)](_0x797711,_0x36b648,_0x1ddd2b){const _0x59470b=_0x122ee0;this[_0x59470b(0x1bd)][_0x59470b(0x295)]({'connectionStatus':_0x59470b(0x263),'isRunning':![]});const _0x540e91=_0x797711?.[_0x59470b(0x25f)]?.[_0x59470b(0x256)]?.[_0x59470b(0x26a)],_0x306f8f=_0x797711?.[_0x59470b(0x25f)]?.[_0x59470b(0x185)]||_0x59470b(0x223),_0x184177=_0x797711?.[_0x59470b(0x25f)];this[_0x59470b(0x1bf)][_0x59470b(0x19a)](_0x59470b(0x246)+_0x306f8f+_0x59470b(0x1f2)+_0x540e91+')');_0x184177&&_0x3422b8[_0x59470b(0x291)](_0x184177)&&this[_0x59470b(0x1bf)][_0x59470b(0x280)](_0x59470b(0x24b),{'statusCode':_0x184177[_0x59470b(0x256)]?.[_0x59470b(0x26a)],'payload':_0x184177[_0x59470b(0x256)]?.[_0x59470b(0x24d)],'data':_0x184177[_0x59470b(0x178)]});if(_0x540e91===DisconnectReason[_0x59470b(0x275)]){this[_0x59470b(0x1bf)][_0x59470b(0x283)](_0x59470b(0x1ec)),this[_0x59470b(0x1bd)][_0x59470b(0x295)]({'qrScanned':![],'reconnectAttempts':0x0,'consecutiveErrors':0x0}),this[_0x59470b(0x1bd)][_0x59470b(0x29b)](_0x59470b(0x22a),{'reason':_0x59470b(0x1a4)});return;}(_0x540e91===0x195||_0x540e91===DisconnectReason[_0x59470b(0x27e)])&&(this[_0x59470b(0x1bf)][_0x59470b(0x283)](_0x59470b(0x26d)),await this[_0x59470b(0x1f1)](),this[_0x59470b(0x1bd)][_0x59470b(0x295)]({'reconnectAttempts':0x0}));_0x540e91===DisconnectReason[_0x59470b(0x27d)]&&(this[_0x59470b(0x1bf)][_0x59470b(0x19a)](_0x59470b(0x221)),await this[_0x59470b(0x1f1)](),this[_0x59470b(0x1bd)][_0x59470b(0x295)]({'reconnectAttempts':0x0,'qrScanned':![]}));if(_0x540e91===0x1ad||_0x540e91===DisconnectReason[_0x59470b(0x1af)]){this[_0x59470b(0x1bf)][_0x59470b(0x19a)](_0x59470b(0x198)),await this[_0x59470b(0x1e6)](_0x36b648,_0x1ddd2b,0x7530);return;}const _0x3c2fc0=this[_0x59470b(0x1ad)](_0x540e91);_0x3c2fc0?await this[_0x59470b(0x259)](_0x36b648,_0x1ddd2b):(this[_0x59470b(0x1bf)][_0x59470b(0x25f)](_0x59470b(0x16f)+this[_0x59470b(0x1bd)][_0x59470b(0x214)][_0x59470b(0x209)]+_0x59470b(0x194)),this[_0x59470b(0x1bf)][_0x59470b(0x283)](_0x59470b(0x29f)),await this[_0x59470b(0x1f1)](),this[_0x59470b(0x1bd)][_0x59470b(0x295)]({'reconnectAttempts':0x0,'qrScanned':![],'consecutiveErrors':0x0}),setTimeout(async()=>{const _0x53e2fe=_0x59470b;this[_0x53e2fe(0x1bf)][_0x53e2fe(0x283)](_0x53e2fe(0x18a));try{await _0x36b648(_0x1ddd2b);}catch(_0x5e58d6){this[_0x53e2fe(0x1bf)][_0x53e2fe(0x25f)](_0x53e2fe(0x1c0),_0x5e58d6),this[_0x53e2fe(0x1bd)][_0x53e2fe(0x29b)](_0x53e2fe(0x263),{'permanent':!![]});}},0xea60));}[_0x122ee0(0x1ad)](_0x3844d3){const _0x267c6d=_0x122ee0,_0x30390d=[DisconnectReason[_0x267c6d(0x275)],DisconnectReason[_0x267c6d(0x1ef)],DisconnectReason[_0x267c6d(0x183)]],_0x4d61ae=this[_0x267c6d(0x1bd)][_0x267c6d(0x214)][_0x267c6d(0x203)]<this[_0x267c6d(0x1bd)][_0x267c6d(0x214)][_0x267c6d(0x209)],_0x42e5b6=!_0x30390d[_0x267c6d(0x28d)](_0x3844d3),_0x14e4dc=this[_0x267c6d(0x1bd)][_0x267c6d(0x214)][_0x267c6d(0x271)]<0x5;return _0x4d61ae&&_0x42e5b6&&_0x14e4dc;}async[_0x122ee0(0x259)](_0x3013bb,_0xcc4ab9){const _0x527ddb=_0x122ee0,_0x17a0db=this[_0x527ddb(0x1bd)][_0x527ddb(0x214)][_0x527ddb(0x203)];this[_0x527ddb(0x1bd)][_0x527ddb(0x1d2)](_0x527ddb(0x203));const _0x26820a=this[_0x527ddb(0x226)][Math[_0x527ddb(0x1ba)](_0x17a0db,this[_0x527ddb(0x226)][_0x527ddb(0x282)]-0x1)];this[_0x527ddb(0x1bf)][_0x527ddb(0x283)](_0x527ddb(0x227)+(_0x17a0db+0x1)+'/'+this[_0x527ddb(0x1bd)][_0x527ddb(0x214)][_0x527ddb(0x209)]+_0x527ddb(0x1b5)+_0x26820a+'ms'),await this[_0x527ddb(0x1e6)](_0x3013bb,_0xcc4ab9,_0x26820a);}async[_0x122ee0(0x1e6)](_0x30802c,_0x226f4f,_0x191d9a){const _0x3e55de=_0x122ee0;this[_0x3e55de(0x24c)]&&clearTimeout(this[_0x3e55de(0x24c)]),this[_0x3e55de(0x24c)]=setTimeout(async()=>{const _0xd135c0=_0x3e55de;try{this[_0xd135c0(0x1bd)][_0xd135c0(0x295)]({'lastReconnect':Date[_0xd135c0(0x20c)]()}),this[_0xd135c0(0x1bf)][_0xd135c0(0x283)](_0xd135c0(0x1d4));if(this[_0xd135c0(0x245)]&&typeof this[_0xd135c0(0x245)][_0xd135c0(0x17e)]===_0xd135c0(0x170))try{await this[_0xd135c0(0x245)][_0xd135c0(0x17e)]();}catch(_0xd8bc3f){}await _0x30802c(_0x226f4f);}catch(_0x5c70ce){this[_0xd135c0(0x1bf)][_0xd135c0(0x25f)](_0xd135c0(0x228),_0x5c70ce),this[_0xd135c0(0x1bd)][_0xd135c0(0x1d2)](_0xd135c0(0x25d)),this[_0xd135c0(0x1bd)][_0xd135c0(0x214)][_0xd135c0(0x271)]++,this[_0xd135c0(0x1bd)][_0xd135c0(0x214)][_0xd135c0(0x1f5)]=_0x5c70ce[_0xd135c0(0x185)],this[_0xd135c0(0x1bd)][_0xd135c0(0x214)][_0xd135c0(0x203)]<this[_0xd135c0(0x1bd)][_0xd135c0(0x214)][_0xd135c0(0x209)]&&await this[_0xd135c0(0x259)](_0x30802c,_0x226f4f);}},_0x191d9a);}async[_0x122ee0(0x1f1)](){const _0x115a05=_0x122ee0;try{const _0x448723=await import('fs'),_0xa5bf46=_0x245e34[_0x115a05(0x217)](_0x115a05(0x1a6));_0x448723[_0x115a05(0x1a0)](_0xa5bf46)&&(_0x448723[_0x115a05(0x1ee)](_0xa5bf46,{'recursive':!![],'force':!![]}),this[_0x115a05(0x1bd)][_0x115a05(0x1d2)](_0x115a05(0x281)),this[_0x115a05(0x1bf)][_0x115a05(0x283)](_0x115a05(0x25e)),await new Promise(_0x5c5de1=>setTimeout(_0x5c5de1,0x3e8)));}catch(_0x2bda02){this[_0x115a05(0x1bf)][_0x115a05(0x19a)](_0x115a05(0x17f),_0x2bda02[_0x115a05(0x185)]);}}async[_0x122ee0(0x1dc)](){const _0x507466=_0x122ee0;if(!this[_0x507466(0x245)]){this[_0x507466(0x1bf)][_0x507466(0x19a)](_0x507466(0x18e));return;}this[_0x507466(0x1bf)][_0x507466(0x283)](_0x507466(0x1c7));try{const _0x17105e=await this[_0x507466(0x245)][_0x507466(0x19e)]();for(const _0x43a58a of Object[_0x507466(0x24e)](_0x17105e)){const _0x51e58a=_0x43a58a[_0x507466(0x1b6)](/\./g,'__'),_0x5ad725=await _0x43da1e[_0x507466(0x187)][_0x507466(0x266)](_0x51e58a);if(!_0x5ad725){const _0x7a8c10=_0x17105e[_0x43a58a],_0x3014cf=_0x7a8c10[_0x507466(0x1c2)]||_0x7a8c10[_0x507466(0x1ed)]?.[_0x507466(0x1c8)](_0x350515=>_0x350515[_0x507466(0x269)]===_0x507466(0x1a1))?.['id']||_0x507466(0x196),_0x22ba45=generateDefaultGroupConfig(_0x3014cf);await _0x43da1e[_0x507466(0x187)][_0x507466(0x218)](_0x51e58a,_0x22ba45),this[_0x507466(0x1bf)][_0x507466(0x283)](_0x507466(0x232)+_0x43a58a+_0x507466(0x2a4));}}}catch(_0x41af35){this[_0x507466(0x1bf)][_0x507466(0x19a)](_0x507466(0x23a),_0x41af35[_0x507466(0x185)]);}}[_0x122ee0(0x1e0)](_0x6ed53f){const _0x21ce63=_0x122ee0;this[_0x21ce63(0x245)]=_0x6ed53f;}[_0x122ee0(0x17b)](){const _0x3010fe=_0x122ee0;this[_0x3010fe(0x264)]&&clearInterval(this[_0x3010fe(0x264)]),this[_0x3010fe(0x264)]=setInterval(()=>{const _0x179321=_0x3010fe,_0x4508e9=process[_0x179321(0x26c)]();_0x4508e9[_0x179321(0x1de)]>this[_0x179321(0x1bd)][_0x179321(0x29a)][_0x179321(0x1eb)]&&(this[_0x179321(0x1bd)][_0x179321(0x29a)][_0x179321(0x1eb)]=_0x4508e9[_0x179321(0x1de)]),global['gc']&&_0x4508e9[_0x179321(0x1de)]>0xc8*0x400*0x400&&(global['gc'](),this[_0x179321(0x1bd)][_0x179321(0x29a)][_0x179321(0x272)]=Date[_0x179321(0x20c)](),this[_0x179321(0x1bf)][_0x179321(0x280)](_0x179321(0x204))),this[_0x179321(0x1bf)][_0x179321(0x280)](_0x179321(0x1e7)+Math[_0x179321(0x1ff)](_0x4508e9[_0x179321(0x1de)]/0x400/0x400)+_0x179321(0x1d5)+this[_0x179321(0x1bd)][_0x179321(0x214)][_0x179321(0x25d)]+_0x179321(0x286)+this[_0x179321(0x1bd)][_0x179321(0x214)][_0x179321(0x203)]),this[_0x179321(0x1bd)][_0x179321(0x214)][_0x179321(0x271)]>0x3&&this[_0x179321(0x1bf)][_0x179321(0x19a)](_0x179321(0x219)+this[_0x179321(0x1bd)][_0x179321(0x214)][_0x179321(0x271)]+_0x179321(0x22e));},0x7530);}async[_0x122ee0(0x27f)](){const _0x1a65c1=_0x122ee0;console[_0x1a65c1(0x2a2)]();const _0x5714f3=await import(_0x1a65c1(0x1b0)),_0x57c905=_0x5714f3[_0x1a65c1(0x1a3)],_0x2446bd=_0x1a65c1(0x20e)+(_0x43da1e[_0x1a65c1(0x249)]?.[_0x1a65c1(0x1fa)]||_0x1a65c1(0x2a3))+_0x1a65c1(0x222);console[_0x1a65c1(0x255)](_0x57c905[_0x1a65c1(0x1dd)][_0x1a65c1(0x1d8)](_0x2446bd));const _0x299223=[_0x57c905[_0x1a65c1(0x224)](_0x1a65c1(0x172))+'\x20'+_0x57c905[_0x1a65c1(0x1f8)](_0x1a65c1(0x27c)),_0x57c905[_0x1a65c1(0x224)](_0x1a65c1(0x1d1))+'\x20'+_0x57c905[_0x1a65c1(0x1f8)](_0x43da1e[_0x1a65c1(0x29c)]),_0x57c905[_0x1a65c1(0x224)](_0x1a65c1(0x1cb))+'\x20'+_0x57c905[_0x1a65c1(0x1f8)](_0x4c3457()[_0x1a65c1(0x17c)](_0x1a65c1(0x225))),_0x57c905[_0x1a65c1(0x224)](_0x1a65c1(0x242))+'\x20'+_0x57c905[_0x1a65c1(0x1f8)](_0x10f99e[_0x1a65c1(0x278)]()+'\x20'+_0x10f99e[_0x1a65c1(0x197)]()),_0x57c905[_0x1a65c1(0x224)](_0x1a65c1(0x22f))+'\x20'+_0x57c905[_0x1a65c1(0x1f8)](Math[_0x1a65c1(0x1ff)](_0x10f99e[_0x1a65c1(0x220)]()/0x400/0x400)+_0x1a65c1(0x1ea)),_0x57c905[_0x1a65c1(0x224)](_0x1a65c1(0x21b))+'\x20'+_0x57c905[_0x1a65c1(0x1f8)](_0x10f99e[_0x1a65c1(0x189)]()[_0x1a65c1(0x282)]+_0x1a65c1(0x28e)),_0x57c905[_0x1a65c1(0x224)](_0x1a65c1(0x25b))+'\x20'+_0x57c905[_0x1a65c1(0x1f8)](this[_0x1a65c1(0x1bd)][_0x1a65c1(0x1c4)]()),_0x57c905[_0x1a65c1(0x224)](_0x1a65c1(0x277))+'\x20'+_0x57c905[_0x1a65c1(0x1f8)](this[_0x1a65c1(0x1bd)][_0x1a65c1(0x214)][_0x1a65c1(0x203)]),_0x57c905[_0x1a65c1(0x224)](_0x1a65c1(0x1bc))+'\x20'+_0x57c905[_0x1a65c1(0x1f8)](_0x1a65c1(0x175))];_0x299223[_0x1a65c1(0x18b)](_0x201d1f=>console[_0x1a65c1(0x255)](_0x201d1f)),console[_0x1a65c1(0x255)](_0x57c905[_0x1a65c1(0x238)][_0x1a65c1(0x1d8)](_0x1a65c1(0x293))),console[_0x1a65c1(0x255)](_0x57c905[_0x1a65c1(0x1cd)]('â”€'[_0x1a65c1(0x26b)](0x41)));}[_0x122ee0(0x171)](){const _0x16c5f8=_0x122ee0;this[_0x16c5f8(0x24c)]&&(clearTimeout(this[_0x16c5f8(0x24c)]),this[_0x16c5f8(0x24c)]=null),this[_0x16c5f8(0x264)]&&(clearInterval(this[_0x16c5f8(0x264)]),this[_0x16c5f8(0x264)]=null);}}class GroupEventHandler{constructor(_0x133175,_0x2ac466,_0x1ff582){const _0x45df27=_0x122ee0;this[_0x45df27(0x245)]=_0x133175,this[_0x45df27(0x1bd)]=_0x2ac466,this[_0x45df27(0x1bf)]=_0x1ff582,this[_0x45df27(0x1ca)]=new Set();}async[_0x122ee0(0x273)](_0x267738){const _0x1b9f31=_0x122ee0,{id:_0x4163ab,participants:_0x42e9dc,action:_0x343284}=_0x267738,_0x56ba75=_0x4163ab+'-'+_0x343284+'-'+_0x42e9dc[_0x1b9f31(0x22d)](',');if(this[_0x1b9f31(0x1ca)][_0x1b9f31(0x17a)](_0x56ba75))return;this[_0x1b9f31(0x1ca)][_0x1b9f31(0x206)](_0x56ba75);try{const _0x398549=_0x4163ab[_0x1b9f31(0x1b6)](/\./g,'__');await this[_0x1b9f31(0x1f6)](_0x4163ab,_0x398549);const _0x1144f3=_0x43da1e[_0x1b9f31(0x187)][_0x1b9f31(0x266)](_0x398549+_0x1b9f31(0x20d))||{},_0x351694=_0x43da1e[_0x1b9f31(0x187)][_0x1b9f31(0x266)](_0x398549+_0x1b9f31(0x297))||{};if(!_0x1144f3[_0x1b9f31(0x243)]&&!_0x351694[_0x1b9f31(0x243)])return;const _0x570027=await this[_0x1b9f31(0x192)](_0x4163ab);if(!_0x570027)return;const _0x4dfbf8=_0x570027[_0x1b9f31(0x235)],_0x5d3124=_0x245e34[_0x1b9f31(0x22d)](__dirname,_0x1b9f31(0x237));for(const _0x2d3203 of _0x42e9dc){try{await this[_0x1b9f31(0x20b)]({'participant':_0x2d3203,'action':_0x343284,'groupId':_0x4163ab,'groupName':_0x4dfbf8,'metadata':_0x570027,'welcomeConfig':_0x1144f3,'goodbyeConfig':_0x351694,'defaultProfilePic':_0x5d3124});}catch(_0x178cb7){this[_0x1b9f31(0x1bf)][_0x1b9f31(0x19a)](_0x1b9f31(0x261)+_0x2d3203+':',_0x178cb7[_0x1b9f31(0x185)]),await this[_0x1b9f31(0x240)](_0x2d3203,_0x343284,_0x4163ab,_0x4dfbf8);}}}catch(_0x102503){this[_0x1b9f31(0x1bf)][_0x1b9f31(0x25f)](_0x1b9f31(0x294)+_0x4163ab+':',_0x102503),this[_0x1b9f31(0x1bd)][_0x1b9f31(0x1d2)](_0x1b9f31(0x25d));}finally{setTimeout(()=>{const _0x4c3cbe=_0x1b9f31;this[_0x4c3cbe(0x1ca)][_0x4c3cbe(0x199)](_0x56ba75);},0x1388);}}async[_0x122ee0(0x1f6)](_0x4dbf65,_0x3a74b8){const _0x19461e=_0x122ee0,_0x28bdb2=_0x43da1e[_0x19461e(0x187)][_0x19461e(0x266)](_0x3a74b8);if(!_0x28bdb2)try{const _0x799ebd=await this[_0x19461e(0x245)][_0x19461e(0x236)](_0x4dbf65),_0x1a9f70=_0x799ebd[_0x19461e(0x1c2)]||_0x799ebd[_0x19461e(0x1ed)]?.[_0x19461e(0x1c8)](_0x1466c0=>_0x1466c0[_0x19461e(0x269)]===_0x19461e(0x1a1))?.['id']||_0x19461e(0x196),_0x50cc83=generateDefaultGroupConfig(_0x1a9f70);await _0x43da1e[_0x19461e(0x187)][_0x19461e(0x218)](_0x3a74b8,_0x50cc83),this[_0x19461e(0x1bf)][_0x19461e(0x283)](_0x19461e(0x1c3)+_0x4dbf65);}catch(_0x25407f){this[_0x19461e(0x1bf)][_0x19461e(0x19a)](_0x19461e(0x20f)+_0x4dbf65+':',_0x25407f[_0x19461e(0x185)]);}}async[_0x122ee0(0x192)](_0xfa1c68){const _0x12505b=_0x122ee0;try{return await this[_0x12505b(0x245)][_0x12505b(0x236)](_0xfa1c68);}catch(_0x75bd93){return this[_0x12505b(0x1bf)][_0x12505b(0x19a)](_0x12505b(0x21f)+_0xfa1c68+':',_0x75bd93[_0x12505b(0x185)]),null;}}async[_0x122ee0(0x20b)]({participant:_0x4ac278,action:_0x83c893,groupId:_0x47739b,groupName:_0x4d1a00,metadata:_0x58e1e0,welcomeConfig:_0x1c9a25,goodbyeConfig:_0x2fc66e,defaultProfilePic:_0x515cb4}){const _0x17049c=_0x122ee0,_0x3373e8=await this[_0x17049c(0x210)](_0x4ac278,_0x58e1e0),_0x422973=await this[_0x17049c(0x213)](_0x4ac278,_0x515cb4);if(_0x83c893===_0x17049c(0x206)&&_0x1c9a25[_0x17049c(0x243)])await this[_0x17049c(0x1e9)]({'participant':_0x4ac278,'groupId':_0x47739b,'groupName':_0x4d1a00,'userInfo':_0x3373e8,'profilePicture':_0x422973});else _0x83c893===_0x17049c(0x191)&&_0x2fc66e[_0x17049c(0x243)]&&await this[_0x17049c(0x1b1)]({'participant':_0x4ac278,'groupId':_0x47739b,'groupName':_0x4d1a00,'userInfo':_0x3373e8,'profilePicture':_0x422973});}async[_0x122ee0(0x210)](_0x51181c,_0x406a42){const _0x5deb39=_0x122ee0;try{const _0x102347=_0x406a42[_0x5deb39(0x1ed)][_0x5deb39(0x1c8)](_0xf5bbef=>_0xf5bbef['id']===_0x51181c);if(_0x102347?.[_0x5deb39(0x19c)])return{'name':_0x102347[_0x5deb39(0x19c)],'phone':_0x51181c[_0x5deb39(0x16e)]('@')[0x0]};const [_0x56a668]=await this[_0x5deb39(0x245)][_0x5deb39(0x1bb)](_0x51181c);return{'name':_0x56a668?.[_0x5deb39(0x23f)]||_0x56a668?.[_0x5deb39(0x19c)]||_0x51181c[_0x5deb39(0x16e)]('@')[0x0],'phone':_0x51181c[_0x5deb39(0x16e)]('@')[0x0]};}catch(_0x878de5){return{'name':_0x51181c[_0x5deb39(0x16e)]('@')[0x0],'phone':_0x51181c[_0x5deb39(0x16e)]('@')[0x0]};}}async[_0x122ee0(0x213)](_0x5b09e1,_0x3e3e42){const _0x180fc0=_0x122ee0;try{return await this[_0x180fc0(0x245)][_0x180fc0(0x230)](_0x5b09e1,_0x180fc0(0x1b2));}catch(_0x17e783){return _0x3e3e42;}}async[_0x122ee0(0x1e9)]({participant:_0x49a367,groupId:_0x436f6d,groupName:_0x557b96,userInfo:_0x42a692,profilePicture:_0x4b0588}){const _0xd9ae4a=_0x122ee0;try{const _0x521791=await generateWelcomeCard({'userImageUrl':_0x4b0588,'userName':_0x42a692[_0xd9ae4a(0x19c)],'groupName':_0x557b96});await this[_0xd9ae4a(0x245)][_0xd9ae4a(0x1e1)](_0x436f6d,{'image':_0x521791,'caption':_0xd9ae4a(0x20a)+_0x42a692[_0xd9ae4a(0x1cc)]+_0xd9ae4a(0x1c6)+_0x557b96+_0xd9ae4a(0x298),'mentions':[_0x49a367]}),this[_0xd9ae4a(0x1bf)][_0xd9ae4a(0x283)](_0xd9ae4a(0x18f)+_0x42a692[_0xd9ae4a(0x19c)]+_0xd9ae4a(0x1b5)+_0x557b96);}catch(_0x2650ed){throw new Error(_0xd9ae4a(0x23d)+_0x2650ed[_0xd9ae4a(0x185)]);}}async[_0x122ee0(0x1b1)]({participant:_0x5168f2,groupId:_0x3ddc0b,groupName:_0x45b0c5,userInfo:_0x3d5c8d,profilePicture:_0x4afd61}){const _0x2738cd=_0x122ee0;try{const _0x2abdcd=await generateGoodbyeCard({'userImageUrl':_0x4afd61,'userName':_0x3d5c8d[_0x2738cd(0x19c)],'groupName':_0x45b0c5});await this[_0x2738cd(0x245)][_0x2738cd(0x1e1)](_0x3ddc0b,{'image':_0x2abdcd,'caption':_0x2738cd(0x1d7)+_0x3d5c8d[_0x2738cd(0x1cc)]+_0x2738cd(0x296)+_0x45b0c5+_0x2738cd(0x1d9),'mentions':[_0x5168f2]}),this[_0x2738cd(0x1bf)][_0x2738cd(0x283)](_0x2738cd(0x179)+_0x3d5c8d[_0x2738cd(0x19c)]+_0x2738cd(0x1b5)+_0x45b0c5);}catch(_0x11c097){throw new Error(_0x2738cd(0x252)+_0x11c097[_0x2738cd(0x185)]);}}async[_0x122ee0(0x240)](_0x34d4ae,_0x38482d,_0x3d43e5,_0x2d857b){const _0x5550bb=_0x122ee0;try{const _0x1ae0be=_0x34d4ae[_0x5550bb(0x16e)]('@')[0x0],_0x4403cb=_0x38482d===_0x5550bb(0x206)?_0x5550bb(0x20a)+_0x1ae0be+_0x5550bb(0x1c6)+_0x2d857b+'*!':_0x5550bb(0x1d7)+_0x1ae0be+_0x5550bb(0x296)+_0x2d857b+'*';await this[_0x5550bb(0x245)][_0x5550bb(0x1e1)](_0x3d43e5,{'text':_0x4403cb,'mentions':[_0x34d4ae]});}catch(_0x219c3e){this[_0x5550bb(0x1bf)][_0x5550bb(0x19a)](_0x5550bb(0x258),_0x219c3e[_0x5550bb(0x185)]);}}}const groupCache=new Map();function _0x2c99(_0x1cc7f4,_0x3b3e13){const _0x345ddd=_0x345d();return _0x2c99=function(_0x2c99e1,_0x3e66d4){_0x2c99e1=_0x2c99e1-0x16a;let _0x33ceba=_0x345ddd[_0x2c99e1];return _0x33ceba;},_0x2c99(_0x1cc7f4,_0x3b3e13);}let globalQueue=null,botState=null,connectionManager=null,groupEventHandler=null;export const botLogger=_0x172950({'level':process[_0x122ee0(0x1a8)][_0x122ee0(0x28f)]||_0x122ee0(0x283),'transport':{'target':_0x122ee0(0x1f3),'options':{'colorize':!![],'translateTime':_0x122ee0(0x1a2),'ignore':_0x122ee0(0x1b7),'messageFormat':_0x122ee0(0x19d)}}});export default async function initBot(_0x43d247){const _0x15a1b5=_0x122ee0;try{!botState&&(botState=new BotStateManager(),botState['on'](_0x15a1b5(0x231),({oldState:_0x5c05d8,newState:_0x4805cc})=>{const _0x17ec0d=_0x15a1b5;_0x5c05d8[_0x17ec0d(0x28c)]!==_0x4805cc[_0x17ec0d(0x28c)]&&botLogger[_0x17ec0d(0x283)](_0x17ec0d(0x16c)+_0x5c05d8[_0x17ec0d(0x28c)]+_0x17ec0d(0x287)+_0x4805cc[_0x17ec0d(0x28c)]);}),botState['on'](_0x15a1b5(0x239),()=>{const _0x42bf0d=_0x15a1b5;botLogger[_0x42bf0d(0x283)](_0x42bf0d(0x1cf));}),botState['on'](_0x15a1b5(0x263),({permanent:_0x19e7af})=>{const _0xbaa940=_0x15a1b5;_0x19e7af&&botLogger[_0xbaa940(0x25f)](_0xbaa940(0x24f));}),botState['on'](_0x15a1b5(0x22a),({reason:_0x298e58})=>{const _0x1745f3=_0x15a1b5;botLogger[_0x1745f3(0x19a)](_0x1745f3(0x21c)+_0x298e58);}));_0x43d247&&(globalQueue=_0x43d247);const _0x34aefd=_0x43d247||globalQueue;if(!_0x34aefd)throw new Error(_0x15a1b5(0x174));botLogger[_0x15a1b5(0x283)](_0x15a1b5(0x254));const {state:_0x277145,saveCreds:_0x30edff}=await useMultiFileAuthState(_0x15a1b5(0x1a6)),_0x39c440=makeWASocket({'auth':_0x277145,'printQRInTerminal':![],'logger':_0x172950({'level':_0x15a1b5(0x276)}),'browser':[_0x15a1b5(0x26f),_0x15a1b5(0x1be),_0x15a1b5(0x1b3)],'cachedGroupMetadata':async _0x5074d5=>groupCache[_0x15a1b5(0x266)](_0x5074d5),'connectTimeoutMs':0xea60,'defaultQueryTimeoutMs':0xea60,'keepAliveIntervalMs':0x2710,'markOnlineOnConnect':!![],'syncFullHistory':![],'generateHighQualityLinkPreview':!![],'maxMsgRetryCount':0x3,'msgRetryCounterMap':{},'retryRequestDelayMs':0xfa,'shouldIgnoreJid':_0x5aa7cb=>{const _0x59cc28=_0x15a1b5;return isJidNewsletter(_0x5aa7cb)||_0x5aa7cb?.[_0x59cc28(0x28d)](_0x59cc28(0x1b9));},'options':{'headers':{'User-Agent':_0x15a1b5(0x23c)}}});!connectionManager&&(connectionManager=new ConnectionManager(botState,botLogger));connectionManager[_0x15a1b5(0x1e0)](_0x39c440),groupEventHandler=new GroupEventHandler(_0x39c440,botState,botLogger);const _0x4a1e02=new MessageRegistry(_0x39c440,botLogger,{'prefix':_0x43da1e[_0x15a1b5(0x29c)],'owners':_0x43da1e[_0x15a1b5(0x22b)][_0x15a1b5(0x266)](_0x15a1b5(0x180),[]),'adminBypass':!![]});_0x34aefd[_0x15a1b5(0x27b)](processMessageFromQueue),_0x39c440['ev']['on'](_0x15a1b5(0x288),_0x30edff),_0x39c440['ev']['on'](_0x15a1b5(0x1da),async _0xfba3b6=>{const _0x387820=_0x15a1b5;try{await connectionManager[_0x387820(0x16a)](_0xfba3b6,initBot,_0x34aefd);}catch(_0x39af23){botLogger[_0x387820(0x25f)](_0x387820(0x1d3),_0x39af23),botState[_0x387820(0x1d2)](_0x387820(0x25d));}});try{setupAntiCall(_0x39c440,_0x43da1e[_0x15a1b5(0x177)],botLogger);}catch(_0x39f191){botLogger[_0x15a1b5(0x19a)](_0x15a1b5(0x207),_0x39f191[_0x15a1b5(0x185)]);}_0x39c440['ev']['on'](_0x15a1b5(0x181),async _0x19fabf=>{const _0x1d4832=_0x15a1b5;try{await groupEventHandler[_0x1d4832(0x273)](_0x19fabf);}catch(_0x168c47){botLogger[_0x1d4832(0x25f)](_0x1d4832(0x1e8),_0x168c47),botState[_0x1d4832(0x1d2)](_0x1d4832(0x25d));}});const _0x79d806=createMessageHandler(_0x39c440,_0x4a1e02,botLogger,groupCache,_0x34aefd);_0x39c440['ev']['on'](_0x15a1b5(0x205),async _0x113c12=>{const _0x59e3ab=_0x15a1b5;try{await _0x79d806(_0x113c12);}catch(_0x47bf78){botLogger[_0x59e3ab(0x25f)](_0x59e3ab(0x260),_0x47bf78),botState[_0x59e3ab(0x1d2)](_0x59e3ab(0x25d));}}),_0x39c440['ev']['on'](_0x15a1b5(0x1df),_0x40de69=>{const _0x10636d=_0x15a1b5;try{botLogger[_0x10636d(0x280)](_0x10636d(0x1a9)+_0x40de69['id']+':\x20'+_0x40de69[_0x10636d(0x202)]?.[Object[_0x10636d(0x24e)](_0x40de69[_0x10636d(0x202)])[0x0]]?.[_0x10636d(0x244)]);}catch(_0x5ece75){botLogger[_0x10636d(0x280)](_0x10636d(0x1ab),_0x5ece75[_0x10636d(0x185)]);}}),_0x39c440['ev']['on'](_0x15a1b5(0x23b),_0x52820d=>{const _0x58667a=_0x15a1b5;try{for(const {key:_0x333684,update:_0x1a54de}of _0x52820d){_0x1a54de[_0x58667a(0x243)]&&botLogger[_0x58667a(0x280)](_0x58667a(0x211)+_0x333684['id']+_0x58667a(0x25c)+_0x1a54de[_0x58667a(0x243)]);}}catch(_0x430883){botLogger[_0x58667a(0x280)](_0x58667a(0x1fd),_0x430883[_0x58667a(0x185)]);}}),_0x39c440['ev']['on'](_0x15a1b5(0x25a),async _0x32cafb=>{const _0x5c4b22=_0x15a1b5;try{botLogger[_0x5c4b22(0x283)](_0x5c4b22(0x1ae)+_0x32cafb[_0x5c4b22(0x1b8)]);}catch(_0xf0dfa){botLogger[_0x5c4b22(0x25f)](_0x5c4b22(0x182),_0xf0dfa);}}),_0x39c440['ev']['on'](_0x15a1b5(0x1f9),_0x43fb17=>{const _0x4692ca=_0x15a1b5;botLogger[_0x4692ca(0x19a)](_0x4692ca(0x16b),_0x43fb17),botState[_0x4692ca(0x1d2)](_0x4692ca(0x25d));}),_0x39c440['ev']['on'](_0x15a1b5(0x29d),_0x1e4877=>{const _0xcb4910=_0x15a1b5;botLogger[_0xcb4910(0x25f)](_0xcb4910(0x268),_0x1e4877),botState[_0xcb4910(0x1d2)](_0xcb4910(0x25d));});const _0x247530=async _0x4909fe=>{const _0x364252=_0x15a1b5;botLogger[_0x364252(0x283)](_0x364252(0x251)+_0x4909fe+_0x364252(0x24a));try{botState&&botState[_0x364252(0x295)]({'isRunning':![]}),connectionManager&&connectionManager[_0x364252(0x171)](),typeof _0x39c440?.[_0x364252(0x17e)]===_0x364252(0x170)?(await _0x39c440[_0x364252(0x17e)](),botLogger[_0x364252(0x283)](_0x364252(0x186))):botLogger[_0x364252(0x19a)](_0x364252(0x1e4)),globalThis[_0x364252(0x24c)]&&clearTimeout(globalThis[_0x364252(0x24c)]),botLogger[_0x364252(0x283)](_0x364252(0x1ac)),process[_0x364252(0x200)](0x0);}catch(_0x51ac3d){botLogger[_0x364252(0x25f)](_0x364252(0x262),_0x51ac3d),process[_0x364252(0x200)](0x1);}};process['on'](_0x15a1b5(0x1f4),()=>_0x247530(_0x15a1b5(0x1f4))),process['on'](_0x15a1b5(0x247),()=>_0x247530(_0x15a1b5(0x247))),process['on'](_0x15a1b5(0x290),()=>_0x247530(_0x15a1b5(0x290))),process['on'](_0x15a1b5(0x1e5),_0x4e11cd=>{const _0x41481e=_0x15a1b5;botLogger[_0x41481e(0x25f)](_0x41481e(0x2a0),_0x4e11cd),botState?.[_0x41481e(0x1d2)](_0x41481e(0x25d)),botState?.[_0x41481e(0x214)][_0x41481e(0x271)]>0xa&&(botLogger[_0x41481e(0x25f)](_0x41481e(0x21e)),_0x247530(_0x41481e(0x1e5)));}),process['on'](_0x15a1b5(0x21a),(_0x4c4e0c,_0xd822c9)=>{const _0x1ee058=_0x15a1b5;botLogger[_0x1ee058(0x25f)](_0x1ee058(0x184),_0xd822c9,_0x1ee058(0x257),_0x4c4e0c),botState?.[_0x1ee058(0x1d2)](_0x1ee058(0x25d)),botState?.[_0x1ee058(0x214)][_0x1ee058(0x271)]>0xa&&(botLogger[_0x1ee058(0x25f)](_0x1ee058(0x21e)),_0x247530(_0x1ee058(0x21a)));});const _0x51ba51=setInterval(()=>{const _0x468985=_0x15a1b5;try{global['gc']&&global['gc']();const _0x2f100e=process[_0x468985(0x26c)](),_0x29950a=Math[_0x468985(0x1ff)](_0x2f100e[_0x468985(0x1de)]/0x400/0x400);_0x29950a>0x1f4&&botLogger[_0x468985(0x19a)](_0x468985(0x1d6)+_0x29950a+'MB'),_0x29950a>0x320&&global['gc']&&(botLogger[_0x468985(0x19a)](_0x468985(0x1aa)),global['gc']());}catch(_0x28e44f){botLogger[_0x468985(0x280)](_0x468985(0x241),_0x28e44f[_0x468985(0x185)]);}},0xea60);return globalThis[_0x15a1b5(0x27a)]=_0x51ba51,process['on'](_0x15a1b5(0x200),()=>{const _0x5cfcd7=_0x15a1b5;globalThis[_0x5cfcd7(0x27a)]&&clearInterval(globalThis[_0x5cfcd7(0x27a)]);}),botLogger[_0x15a1b5(0x283)](_0x15a1b5(0x17d)),_0x39c440;}catch(_0xe5e033){botLogger[_0x15a1b5(0x25f)](_0x15a1b5(0x1f7),_0xe5e033);if(botState){botState[_0x15a1b5(0x1d2)](_0x15a1b5(0x25d)),botState[_0x15a1b5(0x214)][_0x15a1b5(0x271)]++,botState[_0x15a1b5(0x214)][_0x15a1b5(0x1f5)]=_0xe5e033[_0x15a1b5(0x185)];const _0x40e375=botState[_0x15a1b5(0x214)][_0x15a1b5(0x203)]<botState[_0x15a1b5(0x214)][_0x15a1b5(0x209)],_0x3b5b97=botState[_0x15a1b5(0x214)][_0x15a1b5(0x271)]<0x5;if(_0x40e375&&_0x3b5b97){botLogger[_0x15a1b5(0x283)](_0x15a1b5(0x173));if(_0xe5e033[_0x15a1b5(0x185)][_0x15a1b5(0x28d)](_0x15a1b5(0x216))||_0xe5e033[_0x15a1b5(0x185)][_0x15a1b5(0x28d)](_0x15a1b5(0x188))){botLogger[_0x15a1b5(0x283)](_0x15a1b5(0x19b));try{const _0x20965d=await import('fs'),_0x1d2a69=_0x245e34[_0x15a1b5(0x217)](_0x15a1b5(0x1a6));_0x20965d[_0x15a1b5(0x1a0)](_0x1d2a69)&&(_0x20965d[_0x15a1b5(0x1ee)](_0x1d2a69,{'recursive':!![],'force':!![]}),botState[_0x15a1b5(0x295)]({'qrScanned':![]}));}catch(_0x431162){botLogger[_0x15a1b5(0x19a)](_0x15a1b5(0x1ce),_0x431162[_0x15a1b5(0x185)]);}}const _0x38e116=Math[_0x15a1b5(0x1ba)](0x1388*Math[_0x15a1b5(0x1a7)](0x2,botState[_0x15a1b5(0x214)][_0x15a1b5(0x203)]),0xea60);return botLogger[_0x15a1b5(0x283)](_0x15a1b5(0x1fc)+_0x38e116+_0x15a1b5(0x1a5)),await new Promise(_0x2fe973=>setTimeout(_0x2fe973,_0x38e116)),botState[_0x15a1b5(0x1d2)](_0x15a1b5(0x203)),await initBot(_0x43d247);}else botLogger[_0x15a1b5(0x25f)](_0x15a1b5(0x285)),botState[_0x15a1b5(0x29b)](_0x15a1b5(0x263),{'permanent':!![]});}throw _0xe5e033;}}export async function recoverBot(_0x5c8efe){const _0x444df6=_0x122ee0;botLogger[_0x444df6(0x283)](_0x444df6(0x215));try{botState&&(botState[_0x444df6(0x270)](),botState[_0x444df6(0x295)]({'connectionStatus':_0x444df6(0x263),'isRunning':![],'qrScanned':![]}));const _0x4080f3=await import('fs'),_0x403482=_0x245e34[_0x444df6(0x217)](_0x444df6(0x1a6));return _0x4080f3[_0x444df6(0x1a0)](_0x403482)&&(_0x4080f3[_0x444df6(0x1ee)](_0x403482,{'recursive':!![],'force':!![]}),botLogger[_0x444df6(0x283)](_0x444df6(0x267))),await new Promise(_0x26d444=>setTimeout(_0x26d444,0xbb8)),await initBot(_0x5c8efe);}catch(_0x3b2db4){botLogger[_0x444df6(0x25f)](_0x444df6(0x212),_0x3b2db4);throw _0x3b2db4;}}export function getBotStatus(){const _0x168f97=_0x122ee0;if(!botState)return{'status':_0x168f97(0x233),'uptime':0x0,'errors':0x0,'reconnects':0x0};return{'status':botState[_0x168f97(0x214)][_0x168f97(0x28c)],'isRunning':botState[_0x168f97(0x214)][_0x168f97(0x28b)],'uptime':botState[_0x168f97(0x1c4)](),'errors':botState[_0x168f97(0x214)][_0x168f97(0x25d)],'consecutiveErrors':botState[_0x168f97(0x214)][_0x168f97(0x271)],'reconnects':botState[_0x168f97(0x214)][_0x168f97(0x203)],'maxReconnects':botState[_0x168f97(0x214)][_0x168f97(0x209)],'messagesProcessed':botState[_0x168f97(0x214)][_0x168f97(0x1fb)],'lastError':botState[_0x168f97(0x214)][_0x168f97(0x1f5)],'qrScanned':botState[_0x168f97(0x214)][_0x168f97(0x1f0)],'sessionsClearedglobalThis':botState[_0x168f97(0x214)][_0x168f97(0x281)],'memoryUsage':Math[_0x168f97(0x1ff)](process[_0x168f97(0x26c)]()[_0x168f97(0x1de)]/0x400/0x400),'performance':botState[_0x168f97(0x29a)]};}export{botState,connectionManager,groupEventHandler,BotStateManager,ConnectionManager,GroupEventHandler};