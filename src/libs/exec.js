const _0x5aaf3b=_0x1e05;(function(_0x4a56ae,_0x2d3e44){const _0x55c1d1=_0x1e05,_0x5ee3e0=_0x4a56ae();while(!![]){try{const _0x3af713=parseInt(_0x55c1d1(0xdb))/0x1+-parseInt(_0x55c1d1(0xeb))/0x2+-parseInt(_0x55c1d1(0xd8))/0x3+-parseInt(_0x55c1d1(0xfd))/0x4+-parseInt(_0x55c1d1(0xf6))/0x5*(-parseInt(_0x55c1d1(0xfb))/0x6)+parseInt(_0x55c1d1(0xed))/0x7+-parseInt(_0x55c1d1(0xea))/0x8;if(_0x3af713===_0x2d3e44)break;else _0x5ee3e0['push'](_0x5ee3e0['shift']());}catch(_0x4d87e6){_0x5ee3e0['push'](_0x5ee3e0['shift']());}}}(_0x5a85,0xef1b7));import{tmpdir}from'os';import _0xe4dd82 from'crypto';import _0x4b82f0 from'fluent-ffmpeg';import _0x485f24 from'node-webpmux';import _0xd8a06a from'fs';function _0x5a85(){const _0x465f4e=['2509388ZxxOQB','log','[writeExifWebp]\x20Output\x20buffer\x20size:\x20','-an','end','join','[videoToWebp]\x20Input\x20file:\x20','libwebp','[videoToWebp]\x20Conversion\x20completed','hex','exif','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse',',\x20Output\x20file:\x20','[imageToWebp]\x20Output\x20buffer\x20size:\x20','stringify','[imageToWebp]\x20Error:\x20','Unknown','categories','[imageToWebp]\x20Conversion\x20completed','utf-8','.webp','OrbitStudio','-loop','from','[imageToWebp]\x20Input\x20file\x20written,\x20size:\x20','load','[writeExifWebp]\x20Input\x20file\x20written,\x20size:\x20','00:00:00','writeFileSync','[writeExifWebp]\x20Input\x20file:\x20','message','Image','-ss','[videoToWebp]\x20Error:\x20','toFormat','concat','author','[writeExifWebp]\x20Error:\x20','path','outputOptions','readFileSync','.jpg','unlinkSync','3689499HuGQgw','[videoToWebp]\x20FFmpeg\x20error:\x20','readUIntLE','1520486PDneZq','webp','[writeExifImg]\x20Error:\x20','-vf','save','writeUIntLE','-preset','[writeExifVid]\x20Starting\x20with\x20metadata:','error','[writeExifVid]\x20Error:\x20','[writeExifImg]\x20Sticker\x20buffer\x20size:\x20','[writeExifVid]\x20Sticker\x20buffer\x20size:\x20','-vcodec','setFfmpegPath','length','2150800xRMBBJ','593814dzffrA','.mp4','4937877kBOhGC','DefaultPack','NatzsixnPacks','toString','packname','default','inputOptions','randomBytes','[videoToWebp]\x20Input\x20file\x20written,\x20size:\x20','5882115QSDHQo','[imageToWebp]\x20Input\x20file:\x20','[imageToWebp]\x20FFmpeg\x20error:\x20','[writeExifImg]\x20Starting\x20with\x20metadata:','-vsync','6AkYBVe','[videoToWebp]\x20Output\x20buffer\x20size:\x20'];_0x5a85=function(){return _0x465f4e;};return _0x5a85();}import _0x3b27f5 from'path';import _0x7d2093 from'@ffmpeg-installer/ffmpeg';_0x4b82f0[_0x5aaf3b(0xe8)](_0x7d2093[_0x5aaf3b(0x123)]);function generateRandomName(_0x38882e){const _0x98c11c=_0x5aaf3b;return''+_0xe4dd82[_0x98c11c(0xf4)](0xa)[_0x98c11c(0xf0)](_0x98c11c(0x106))+_0x38882e;}async function imageToWebp(_0x4d3799,_0x5ac88d=null){const _0x29c61e=_0x5aaf3b,_0x290bc4=_0x5ac88d?_0x5ac88d+_0x29c61e(0x111):generateRandomName(_0x29c61e(0x111)),_0x23bc94=_0x3b27f5[_0x29c61e(0x102)](tmpdir(),_0x290bc4),_0x5928d3=_0x3b27f5[_0x29c61e(0x102)](tmpdir(),_0x5ac88d?_0x5ac88d+_0x29c61e(0xd6):generateRandomName(_0x29c61e(0xd6)));console[_0x29c61e(0xfe)](_0x29c61e(0xf7)+_0x5928d3+_0x29c61e(0x109)+_0x23bc94);try{_0xd8a06a[_0x29c61e(0x119)](_0x5928d3,_0x4d3799),console[_0x29c61e(0xfe)](_0x29c61e(0x115)+_0x4d3799[_0x29c61e(0xe9)]),await new Promise((_0x15df83,_0x5518af)=>{const _0x1da55d=_0x29c61e;_0x4b82f0(_0x5928d3)[_0x1da55d(0x124)]([_0x1da55d(0xde),_0x1da55d(0x108)])[_0x1da55d(0x11f)](_0x1da55d(0xdc))[_0x1da55d(0xdf)](_0x23bc94)['on'](_0x1da55d(0x101),()=>{const _0x37f1a2=_0x1da55d;console[_0x37f1a2(0xfe)](_0x37f1a2(0x10f)),_0x15df83();})['on'](_0x1da55d(0xe3),_0x499f7c=>{const _0x5cc4f7=_0x1da55d;console[_0x5cc4f7(0xe3)](_0x5cc4f7(0xf8)+_0x499f7c[_0x5cc4f7(0x11b)]),_0x5518af(_0x499f7c);});});const _0x447dcb=_0xd8a06a[_0x29c61e(0xd5)](_0x23bc94);return console[_0x29c61e(0xfe)](_0x29c61e(0x10a)+_0x447dcb[_0x29c61e(0xe9)]),_0xd8a06a[_0x29c61e(0xd7)](_0x23bc94),_0xd8a06a[_0x29c61e(0xd7)](_0x5928d3),_0x447dcb;}catch(_0x4ee375){console[_0x29c61e(0xe3)](_0x29c61e(0x10c)+_0x4ee375[_0x29c61e(0x11b)]);try{_0xd8a06a[_0x29c61e(0xd7)](_0x23bc94),_0xd8a06a[_0x29c61e(0xd7)](_0x5928d3);}catch{}throw _0x4ee375;}}async function videoToWebp(_0x2c14a0,_0x245a80=null){const _0x38537f=_0x5aaf3b,_0x2007ea=_0x245a80?_0x245a80+_0x38537f(0x111):generateRandomName(_0x38537f(0x111)),_0x19400b=_0x3b27f5[_0x38537f(0x102)](tmpdir(),_0x2007ea),_0x3c6621=_0x3b27f5[_0x38537f(0x102)](tmpdir(),_0x245a80?_0x245a80+_0x38537f(0xec):generateRandomName(_0x38537f(0xec)));console[_0x38537f(0xfe)](_0x38537f(0x103)+_0x3c6621+_0x38537f(0x109)+_0x19400b);try{_0xd8a06a[_0x38537f(0x119)](_0x3c6621,_0x2c14a0),console[_0x38537f(0xfe)](_0x38537f(0xf5)+_0x2c14a0[_0x38537f(0xe9)]),await new Promise((_0x36a16b,_0x48a2f3)=>{const _0x4aeb1e=_0x38537f;_0x4b82f0(_0x3c6621)[_0x4aeb1e(0xf3)](['-y','-t','20'])[_0x4aeb1e(0x124)]([_0x4aeb1e(0xe7),_0x4aeb1e(0x104),_0x4aeb1e(0xde),_0x4aeb1e(0x108),_0x4aeb1e(0x113),'0',_0x4aeb1e(0x11d),_0x4aeb1e(0x118),'-t','20',_0x4aeb1e(0xe1),_0x4aeb1e(0xf2),_0x4aeb1e(0x100),_0x4aeb1e(0xfa),'0'])[_0x4aeb1e(0x11f)](_0x4aeb1e(0xdc))[_0x4aeb1e(0xdf)](_0x19400b)['on'](_0x4aeb1e(0x101),()=>{const _0x5d81f5=_0x4aeb1e;console[_0x5d81f5(0xfe)](_0x5d81f5(0x105)),_0x36a16b();})['on'](_0x4aeb1e(0xe3),_0x431dbe=>{const _0x1b6181=_0x4aeb1e;console[_0x1b6181(0xe3)](_0x1b6181(0xd9)+_0x431dbe[_0x1b6181(0x11b)]),_0x48a2f3(_0x431dbe);});});const _0x31f3dc=_0xd8a06a[_0x38537f(0xd5)](_0x19400b);return console[_0x38537f(0xfe)](_0x38537f(0xfc)+_0x31f3dc[_0x38537f(0xe9)]),_0xd8a06a[_0x38537f(0xd7)](_0x19400b),_0xd8a06a[_0x38537f(0xd7)](_0x3c6621),_0x31f3dc;}catch(_0x47781a){console[_0x38537f(0xe3)](_0x38537f(0x11e)+_0x47781a[_0x38537f(0x11b)]);try{_0xd8a06a[_0x38537f(0xd7)](_0x19400b),_0xd8a06a[_0x38537f(0xd7)](_0x3c6621);}catch{}throw _0x47781a;}}async function writeExifImg(_0x406d7c,_0x142c89,_0x43815d=null){const _0x49b198=_0x5aaf3b;console[_0x49b198(0xfe)](_0x49b198(0xf9),_0x142c89);try{const _0x159432=new _0x485f24[(_0x49b198(0x11c))](),_0x150ec7={'sticker-pack-id':_0x49b198(0x112),'sticker-pack-name':_0x142c89[_0x49b198(0xf1)]||_0x49b198(0xee),'sticker-pack-publisher':_0x142c89[_0x49b198(0x121)]||_0x49b198(0x10d),'emojis':_0x142c89[_0x49b198(0x10e)]||['']},_0x1b6e58=Buffer[_0x49b198(0x114)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x3d4f54=Buffer[_0x49b198(0x114)](JSON[_0x49b198(0x10b)](_0x150ec7),_0x49b198(0x110)),_0x21d994=Buffer[_0x49b198(0x120)]([_0x1b6e58,_0x3d4f54]);_0x21d994[_0x49b198(0xe0)](_0x3d4f54[_0x49b198(0xe9)],0xe,0x4);const _0x2a02b3=await imageToWebp(_0x406d7c,_0x43815d);await _0x159432[_0x49b198(0x116)](_0x2a02b3),_0x159432[_0x49b198(0x107)]=_0x21d994;const _0x562a05=await _0x159432[_0x49b198(0xdf)](null);return console[_0x49b198(0xfe)](_0x49b198(0xe5)+_0x562a05[_0x49b198(0xe9)]),_0x562a05;}catch(_0x340835){console[_0x49b198(0xe3)](_0x49b198(0xdd)+_0x340835[_0x49b198(0x11b)]);throw _0x340835;}}async function writeExifVid(_0x2a5bc3,_0x1627f4,_0xcfd534=null){const _0x1d7f24=_0x5aaf3b;console[_0x1d7f24(0xfe)](_0x1d7f24(0xe2),_0x1627f4);try{const _0x1d48c1=new _0x485f24[(_0x1d7f24(0x11c))](),_0x34e9bc={'sticker-pack-id':_0x1d7f24(0x112),'sticker-pack-name':_0x1627f4[_0x1d7f24(0xf1)]||_0x1d7f24(0xee),'sticker-pack-publisher':_0x1627f4[_0x1d7f24(0x121)]||_0x1d7f24(0x10d),'emojis':_0x1627f4[_0x1d7f24(0x10e)]||['']},_0x46d887=Buffer[_0x1d7f24(0x114)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x360ebe=Buffer[_0x1d7f24(0x114)](JSON[_0x1d7f24(0x10b)](_0x34e9bc),_0x1d7f24(0x110)),_0xca70f8=Buffer[_0x1d7f24(0x120)]([_0x46d887,_0x360ebe]);_0xca70f8[_0x1d7f24(0xe0)](_0x360ebe[_0x1d7f24(0xe9)],0xe,0x4);const _0x5091db=await videoToWebp(_0x2a5bc3,_0xcfd534);await _0x1d48c1[_0x1d7f24(0x116)](_0x5091db),_0x1d48c1[_0x1d7f24(0x107)]=_0xca70f8;const _0x2461b2=await _0x1d48c1[_0x1d7f24(0xdf)](null);return console[_0x1d7f24(0xfe)](_0x1d7f24(0xe6)+_0x2461b2[_0x1d7f24(0xe9)]),_0x2461b2;}catch(_0xb6c64d){console[_0x1d7f24(0xe3)](_0x1d7f24(0xe4)+_0xb6c64d[_0x1d7f24(0x11b)]);throw _0xb6c64d;}}async function writeExifWebp(_0x58528f,_0x1b1f0b,_0x577351=null,_0x4488f6=null){const _0x4290f5=_0x5aaf3b,_0x3f243c=_0x3b27f5[_0x4290f5(0x102)](tmpdir(),_0x577351?_0x577351+_0x4290f5(0x111):_0xe4dd82[_0x4290f5(0xf4)](0x6)[_0x4290f5(0xda)](0x0,0x6)[_0x4290f5(0xf0)](0x24)+_0x4290f5(0x111)),_0x3397fb=_0x3b27f5[_0x4290f5(0x102)](tmpdir(),_0x4488f6?_0x4488f6+_0x4290f5(0x111):_0xe4dd82[_0x4290f5(0xf4)](0x6)[_0x4290f5(0xda)](0x0,0x6)[_0x4290f5(0xf0)](0x24)+_0x4290f5(0x111));console[_0x4290f5(0xfe)](_0x4290f5(0x11a)+_0x3f243c+_0x4290f5(0x109)+_0x3397fb);try{_0xd8a06a[_0x4290f5(0x119)](_0x3f243c,_0x58528f),console[_0x4290f5(0xfe)](_0x4290f5(0x117)+_0x58528f[_0x4290f5(0xe9)]);const _0x361af8=new _0x485f24[(_0x4290f5(0x11c))](),_0x51dd2d={'sticker-pack-id':_0x4290f5(0xef),'sticker-pack-name':_0x1b1f0b[_0x4290f5(0xf1)]||_0x4290f5(0xef),'sticker-pack-publisher':_0x1b1f0b[_0x4290f5(0x121)]||_0x4290f5(0x112),'emojis':_0x1b1f0b[_0x4290f5(0x10e)]||['']},_0x34f01f=Buffer[_0x4290f5(0x114)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x558d37=Buffer[_0x4290f5(0x114)](JSON[_0x4290f5(0x10b)](_0x51dd2d),_0x4290f5(0x110)),_0x5ad614=Buffer[_0x4290f5(0x120)]([_0x34f01f,_0x558d37]);_0x5ad614[_0x4290f5(0xe0)](_0x558d37[_0x4290f5(0xe9)],0xe,0x4),await _0x361af8[_0x4290f5(0x116)](_0x3f243c),_0x361af8[_0x4290f5(0x107)]=_0x5ad614,await _0x361af8[_0x4290f5(0xdf)](_0x3397fb);const _0x22f7b1=_0xd8a06a[_0x4290f5(0xd5)](_0x3397fb);return console[_0x4290f5(0xfe)](_0x4290f5(0xff)+_0x22f7b1[_0x4290f5(0xe9)]),_0xd8a06a[_0x4290f5(0xd7)](_0x3f243c),_0xd8a06a[_0x4290f5(0xd7)](_0x3397fb),_0x22f7b1;}catch(_0x5b36bb){console[_0x4290f5(0xe3)](_0x4290f5(0x122)+_0x5b36bb[_0x4290f5(0x11b)]);try{_0xd8a06a[_0x4290f5(0xd7)](_0x3f243c),_0xd8a06a[_0x4290f5(0xd7)](_0x3397fb);}catch{}throw _0x5b36bb;}}function _0x1e05(_0x417e52,_0x59c083){const _0x5a8547=_0x5a85();return _0x1e05=function(_0x1e0529,_0x5569ff){_0x1e0529=_0x1e0529-0xd5;let _0x27efa1=_0x5a8547[_0x1e0529];return _0x27efa1;},_0x1e05(_0x417e52,_0x59c083);}export{imageToWebp,videoToWebp,writeExifImg,writeExifVid,writeExifWebp};